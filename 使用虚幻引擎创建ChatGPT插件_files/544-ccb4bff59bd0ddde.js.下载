"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{86885:function(e,n,r){r.d(n,{Z:function(){return h}});var t=r(61706),a=r(45813),s=r(35250),o=r(61432),i=r(70079),l=r(48240),c=r(12762),u=r(98943),d=r(60814),p=r(74516),f=r(35e3),m=r(69858),v=r(77507);function h(e){var n=e.isOpen,r=e.onClose,h=(0,i.useRef)(null),x=(0,c.WS)(),g=(0,i.useState)(!1),b=g[0],y=g[1],w=(0,o.useRouter)(),j=(0,i.useCallback)(function(){x(u.s6.closeAccountPaymentModal),r()},[r,x]),Z=(0,i.useCallback)((0,t.Z)(function(){var e;return(0,a.__generator)(this,function(n){switch(n.label){case 0:y(!0),x(u.s6.clickAccountPaymentCheckout),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,d.ZP.submitCheckoutForm()];case 2:return e=n.sent(),w.push(e.url),[3,5];case 3:return n.sent(),p.m.warning("The payments page encountered an error. Please try again. If the problem continues, please email support@openai.com.",{hasCloseButton:!0}),[3,5];case 4:return y(!1),[7];case 5:return[2]}})}),[w,x,y]);return(0,s.jsxs)(f.x,{isOpen:n,onClose:r,focusRef:h,children:[(0,s.jsxs)("div",{className:"flex w-full flex-row items-center justify-between border-b py-3 px-4 dark:border-gray-700",children:[(0,s.jsx)("span",{className:"text-base font-semibold sm:text-base",children:"Your Account"}),(0,s.jsx)("button",{className:"text-gray-700 opacity-50 transition hover:opacity-75 dark:text-white",onClick:j,children:(0,s.jsx)(l.q5L,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2",children:[(0,s.jsx)("div",{className:"relative order-2 col-span-1 border-t border-r-0 dark:border-gray-700 sm:order-1 sm:border-t-0 sm:border-r",children:(0,s.jsx)(m.Oi,{rowElements:[(0,s.jsx)(m.Cu,{text:"Free Plan"},"row-free-plan-name"),(0,s.jsx)(m.hi,{variant:"disabled",disabled:!0,text:v.S.free.callToAction.active},"row-free-plan-button"),(0,s.jsx)(m.G,{variant:"secondary",text:v.S.free.demandAccess},"row-free-plan-demand"),(0,s.jsx)(m.G,{variant:"secondary",text:v.S.free.responseSpeed},"row-free-plan-speed"),(0,s.jsx)(m.G,{className:"sm:pb-2",variant:"secondary",text:v.S.free.modelFeatures},"row-free-plan-updates"),]})}),(0,s.jsx)("div",{className:"relative order-1 col-span-1 sm:order-2",children:(0,s.jsx)(m.Oi,{rowElements:[(0,s.jsx)(m.Cu,{text:v.S.plus.name,children:(0,s.jsx)("span",{className:"font-semibold text-gray-500",children:v.S.plus.costInDollars})},"row-plus-plan-title"),(0,s.jsx)(m.hi,{variant:"primary",disabled:b,isLoading:b,ref:h,onClick:Z,text:v.S.plus.callToAction.inactivePayment},"row-plus-plan-button"),(0,s.jsx)(m.G,{variant:"primary",text:v.S.plus.demandAccess},"row-plus-plan-demand"),(0,s.jsx)(m.G,{variant:"primary",text:v.S.plus.responseSpeed},"row-plus-plan-speed"),(0,s.jsx)(m.G,{className:"sm:pb-2",variant:"primary",text:v.S.plus.modelFeatures},"row-plus-plan-updates"),]})})]})]})}},35e3:function(e,n,r){r.d(n,{x:function(){return l}});var t=r(14806),a=r(35250),s=r(34303),o=r(73925);function i(){var e=(0,t.Z)(["flex grow items-center justify-center bg-white dark:bg-gray-900 rounded-md flex flex-col items-start overflow-hidden border shadow-md dark:border-gray-700"]);return i=function(){return e},e}var l=function(e){var n=e.children,r=e.isOpen,t=e.onClose,s=e.focusRef;return(0,a.jsx)(o.Z,{size:"fullscreen",isOpen:r,onModalClose:t,type:"success",title:"",className:"bg-transparent dark:bg-transparent",initialFocusRef:s,children:(0,a.jsx)("div",{className:"flex h-full flex-col items-center justify-start",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(c,{children:n})})})})},c=s.Z.div(i())},69858:function(e,n,r){r.d(n,{Cu:function(){return m},G:function(){return x},Oi:function(){return f},hi:function(){return h},nR:function(){return g}});var t=r(14806),a=r(35250),s=r(19841),o=r(48240),i=r(34303),l=r(39690),c=r(79876);function u(){var e=(0,t.Z)(["p-4 flex flex-col gap-3 bg-white z-20 relative dark:bg-gray-900"]);return u=function(){return e},e}function d(){var e=(0,t.Z)(["gap-2 flex flex-row justify-start items-center text-sm"]);return d=function(){return e},e}function p(){var e=(0,t.Z)(["text-xl font-semibold justify-between items-center flex"]);return p=function(){return e},e}var f=function(e){var n=e.rowElements;return(0,a.jsx)(b,{children:n.map(function(e){return e})})},m=function(e){var n=e.className,r=e.text,t=e.children;return(0,a.jsxs)(w,{className:n,children:[(0,a.jsx)("span",{children:r}),t]})},v={"primary-disabled":"border-none bg-gray-200 py-3 font-semibold hover:bg-gray-200",primary:"border-none py-3 font-semibold",disabled:"dark:text-gray-white border-none bg-gray-300 py-3 font-semibold text-gray-800 hover:bg-gray-300 dark:bg-gray-500 dark:opacity-100"},h=function(e){var n=e.isLoading,r=e.disabled,t=e.onClick,i=(e.className,e.variant),u=void 0===i?"primary":i,d=e.text,p=e.ref;return(0,a.jsxs)(l.z,{disabled:void 0!==r&&r,onClick:t,openNewTab:!0,ref:p,as:"button",className:(0,s.Z)(v[u]),children:[(0,a.jsx)("span",{className:(0,s.Z)({"text-gray-700":"primary-disabled"===u,"text-white":"primary"===u}),children:d}),void 0!==n&&n&&(0,a.jsx)(c.ZP,{className:"animate-spin",icon:o.dAq})]})},x=function(e){var n=e.variant,r=void 0===n?"primary":n,t=e.className,i=e.text;return(0,a.jsxs)(y,{className:t,children:[(0,a.jsx)(c.ZP,{icon:o._rq,className:(0,s.Z)("h-5 w-5",{"text-green-700":"primary"==r,"text-gray-400":"secondary"==r})}),(0,a.jsx)("span",{children:i})]})},g=function(e){var n=e.className,r=e.text,t=e.isLoading,s=e.onClick;return(0,a.jsx)(y,{className:n,children:(0,a.jsxs)("button",{onClick:s,className:"flex flex-row items-center space-x-1 underline",children:[(0,a.jsx)("span",{children:r}),t&&(0,a.jsx)(c.ZP,{className:"animate-spin",icon:o.dAq})]})})},b=i.Z.div(u()),y=i.Z.div(d()),w=i.Z.div(p())},77507:function(e,n,r){r.d(n,{S:function(){return t}});var t={free:{name:"Free Plan",callToAction:{active:"Your Current Plan",inactive:"Your Current Plan"},costInDollars:"",demandAccess:"Available when demand is low",responseSpeed:"Standard response speed",modelFeatures:"Regular model updates"},plus:{name:"ChatGPT Plus",callToAction:{active:"Your current plan",inactive:"I'm Interested",inactivePayment:"Upgrade plan"},costInDollars:"USD $20/mo",demandAccess:"Available even when demand is high",responseSpeed:"Faster response speed",modelFeatures:"Priority access to new features"},manageSubscription:{callToAction:"Manage my subscription"}}},32329:function(e,n,r){r.d(n,{Z:function(){return m},n:function(){return v}});var t=r(87762),a=r(62906),s=r(61432),o=r(70079),i=r(31501),l=r(61079),c=r(89874),u=r(60814),d=r(80836),p=r(36613),f=r(74516);function m(e){var n=e.threadId,r=e.accessToken,a=(0,s.useRouter)(),m=(0,t.a)(["conversation",n],function(){return u.ZP.getConversation(n,r,!1)},{enabled:Boolean(n),onError:function(){a.replace("/chat"),f.m.danger("Unable to load conversation ".concat(n))}}),v=m.data,h=m.isLoading,x=(0,o.useMemo)(function(){if(!v)return{thread:d.Cv.createTree(),currentLeafId:"root",threadId:null,title:"New chat",lastModelUsed:null};var e,n,r,t,s,o,u=(r=null===(n=Object.values(v.mapping).find(function(e){return null===e.parent}))||void 0===n?void 0:n.id,t=new Set,s=new Set,(v.moderation_results||[]).forEach(function(e){e.blocked?s.add(e.message_id):e.flagged&&t.add(e.message_id)}),{rootId:r,mapping:Object.keys(v.mapping).reduce(function(e,n){var r,a=v.mapping[n],o=a.parent,u=a.children,f=(0,c.Z)(a,["parent","children"]),m=v.mapping[n].message||d.Cv.createRootMessage();return s.has(m.id)?r=p.sK:t.has(m.id)&&(r=p.Mf),e[n]=(0,i.Z)((0,l.Z)((0,i.Z)({},f),{message:m,children:u||[],parentId:o||"",type:d.uV[m.role]}),r&&{metadata:r}),e},{}),currentLeafId:v.current_node});return{thread:u.mapping||d.Cv.createTree(),currentLeafId:u.currentLeafId||u.rootId||"root",threadId:null===(o=a.query.chatId)||void 0===o?void 0:o[0],title:v.title||null,lastModelUsed:function e(n,r){var t,a,s=n[r];return(null==s?void 0:null===(t=s.message)||void 0===t?void 0:null===(a=t.metadata)||void 0===a?void 0:a.model_slug)?s.message.metadata.model_slug:(null==s?void 0:s.parentId)?e(n,s.parentId):(console.log("No model found in conversation tree"),null)}(u.mapping,u.currentLeafId)}},[v,a.query.chatId]);return(0,o.useMemo)(function(){return{threadData:x,isLoading:Boolean(n&&h)}},[h,x,n])}function v(){var e=(0,a.NL)();return(0,o.useCallback)(function(n){e.removeQueries(["conversation",n])},[e])}},49690:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(70079),a=r(12762),s=r(98943),o=r(82018),i=r(60814);function l(e,n,r,l,c,u,d){var p=(0,o.kP)().session,f=(0,a.WS)(l);(0,t.useEffect)(function(){i.ZP.setAccessToken(r),a.ZP.setUser(n,c,u,d),f(s.s6.pageLoad)},[]),(0,t.useEffect)(function(){(null==p?void 0:p.accessToken)&&i.ZP.setAccessToken(p.accessToken),(null==p?void 0:p.error)==="RefreshAccessTokenError"&&(console.error(p.error),window._oaiHandleSessionExpired("page load",p.error))},[p]),(0,t.useEffect)(function(){document.title=e},[e])}},66285:function(e,n,r){r.d(n,{hz:function(){return u},mA:function(){return l},nR:function(){return c}});var t=r(31501),a=r(61079),s=r(70079),o=r(59268),i={lastUpdated:Date.now()},l=(0,o.ZP)()(function(e){return(0,a.Z)((0,t.Z)({},i),{resetAccount:function(){e(i)},updateAccountPlanWithResponse:function(n){var r,t,a;e({accountPlan:{hasPaidSubscription:(null==n?void 0:null===(r=n.account_plan)||void 0===r?void 0:r.is_paid_subscription_active)||!1,subscriptionPlan:(null==n?void 0:null===(t=n.account_plan)||void 0===t?void 0:t.subscription_plan)||"chatgptplusfreeplan",accountUserRole:(null==n?void 0:null===(a=n.account_plan)||void 0===a?void 0:a.account_user_role)||"account-owner"},features:(null==n?void 0:n.features)||[]})}})}),c=function(){return l(function(e){var n;return null===(n=e.accountPlan)||void 0===n?void 0:n.hasPaidSubscription})},u=function(){var e=l(function(e){return e.features});return(0,s.useMemo)(function(){return new Set(e)},[e])}},27252:function(e,n,r){r.d(n,{g:function(){return l}});var t=r(33861),a=r(31501),s=r(61079),o=r(59268),i={flags:{isUserInCanPayGroup:!1,projectWish:!1,highlightPlusUpgrade:!1,failwhaleBypassEnabled:!1}},l=(0,o.ZP)()(function(e,n){return(0,s.Z)((0,a.Z)({},i),{updateFlagValue:function(r,o){var i=n().flags;e({flags:(0,s.Z)((0,a.Z)({},i),(0,t.Z)({},r,o))})}})})}}]);